<!DOCTYPE html>
<html style="overflow:hidden;height:100%">
  <head>
    <meta charset="utf-8">
    <title>Bldrs running inside an iframe</title>
    <script type="text/javascript" src="https://unpkg.com/matrix-widget-api@1.1.1/dist/api.js"></script>

    <!-- initializes & wires up all messages -->
    <script type="text/javascript" src="bldrs-inside-iframe.js"></script>
  </head>

  <!--
    This page contains a) a Bldrs instance running in an iframe and b) preset controls to emit messages and receive messages to/from Bldrs.
    This serves as a basic foundation for the black-box integration tests located at /cypress/e2e/integration/
  -->
  <body style="overflow:hidden;height:100%">

    <!-- Flag is set once Matrix Widget API is ready -->
    <input id="cbxIsReady" type="checkbox"></input>
    <label for="cbxIsReady">Is Ready</label>

    <!-- Contains the last message received from the iframe through Matrix Widget API -->
    <input id="txtLastMsg" type="text"></input>
    <label for="txtLastMsg">Last Message Received</label>
    <br/>

    <!-- Sends a message to the iframe through Matrix Widget API -->
    <div class="send-actions d-flex">
      <input id="txtSendMessageType" type="text" placeholder="message type"></input>
      <input id="txtSendMessagePayload" type="text" placeholder="message payload"></input>
      <input id="btnSendMessage" type="button" value="Send"></input>
        <!-- Last Message Received info -->
      <div class="msg-info d-flex" >
        <div>
          Messages Count: <span id="messagesCount">0</span>
        </div>
        <div>
          Last Action Type: <span id="lastMessageReceivedAction">-</span>
        </div>
      </div>
    </div> 
  
    

    <!-- Contains Bldrs in an iframe, the URL is set later -->
    <iframe 
      id="bldrs-widget-iframe" 
      title="bldrs" 
      style="overflow:hidden;height:90%;width:90%" 
      width="90%" 
      height="90%">
    </iframe>

    <style> 

    .d-flex{
      display: flex;
    }
 
    .msg-info div {
      padding:4px;
      margin: 2px;
      border-radius: 5px;
      background-color: #c7c7c7;
    }

    .send-actions > * {
     margin-right: 0.5rem;
    }

    </style>
  </body>
</html>